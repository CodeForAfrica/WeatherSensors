<!-- index.html-->

{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block body %}
<!-- Hero Banner -->
<section class="city-data">
  <div class="top-shadow"></div>
  <!-- City Map & Detail Info -->
  <div class="city-detail">
        <span class="tag white">Weather Stations for Tanzania</span>
    <h1 class="city-name"> Dar-es-salaam</h1>
    <a href="/stations" class="other-station"><i></i>Find other stations</a>
  </div>
  <div class="row">
    <div class="weather-container">
    <div class="col-md-4 col-xs-4">
      <script type="text/javascript">
        FusionCharts.ready(function(){
          var fusioncharts = new FusionCharts({
          type: 'thermometer',
          renderAt: 'chart-container',
          id: 'myThm',
          width: '200',
          height: '200',
          dataFormat: 'json',
          dataSource: {
              "chart": {
                  "caption": "Temperature Monitor",
                  "subcaption": " Central cold store",
                  "lowerLimit": "-10",
                  "upperLimit": "0",

                  "decimals": "1",
                  "numberSuffix": "Â°C",
                  "showhovereffect": "1",
                  "thmFillColor": "#008ee4",
                  "showGaugeBorder": "1",
                  "gaugeBorderColor": "#008ee4",
                  "gaugeBorderThickness": "2",
                  "gaugeBorderAlpha": "30",
                  "thmOriginX": "100",
                  "chartBottomMargin": "20",
                  "valueFontColor": "#000000",
                  "theme": "fint"
              },
              "value": "-6",
              //All annotations are grouped under this element
              "annotations": {
                  "showbelow": "0",
                  "groups": [{
                      //Each group needs a unique ID
                      "id": "indicator",
                      "items": [
                          //Showing Annotation
                          {
                              "id": "background",
                              //Rectangle item
                              "type": "rectangle",
                              "alpha": "50",
                              "fillColor": "#AABBCC",
                              "x": "$gaugeEndX-40",
                              "tox": "$gaugeEndX",
                              "y": "$gaugeEndY+54",
                              "toy": "$gaugeEndY+72"
                          }
                      ]
                  }]

              },
          },
      }
      );

  var fusionchart = new FusionCharts({
    type: 'cylinder',
    dataFormat: 'json',
    id: 'fuelMeter-1',
    renderAt: 'chart-container2',
    width: '250',
    height: '200',
    dataSource: {
        "chart": {
            "theme": "fint",
            "caption": "Diesel Level in Generator",
            "subcaption": "Bakersfield Central",
            "lowerLimit": "0",
            "upperLimit": "120",
            "lowerLimitDisplay": "Empty",
            "upperLimitDisplay": "Full",
            "numberSuffix": " ltrs",
            "showValue": "1",
            "chartBottomMargin": "45",
            "showValue": "0"
        },
        "value": "110",
        "annotations": {
            "origw": "400",
            "origh": "190",
            "autoscale": "1",
            "groups": [{
                "id": "range",
                "items": [{
                    "id": "rangeBg",
                    "type": "rectangle",
                    "x": "$canvasCenterX-45",
                    "y": "$chartEndY-30",
                    "tox": "$canvasCenterX +45",
                    "toy": "$chartEndY-75",
                    "fillcolor": "#6caa03"
                }, {
                    "id": "rangeText",
                    "type": "Text",
                    "fontSize": "11",
                    "fillcolor": "#333333",
                    "text": "80 ltrs",
                    "x": "$chartCenterX-45",
                    "y": "$chartEndY-50"
                }]
            }]
        }

    }
});
          fusioncharts.render();
          fusionchart.render();
      });
      </script>
      <div id="chart-container"></div>
      <!-- <div id='windspeed'></div>
        <script src="{{url_for('static', filename='charts.js')}}"></script> -->
    </div>
    <div class="col-md-4 col-xs-4">
      <div id="chart-container2"></div>
    </div>
    <div class="col-md-4 col-xs-4">
      <div class="compass">
        <div class="direction">
          <p><span> {{ lastMeasuredWindDirection }} &deg;</span></p>
        </div>
        <div class="arrow {{ winddirectionClass }}"></div>
      </div>
      <div id='windGConfig'></div>
      <script>
      var speed = [];
      speed[0] = {{ lastMeasuredWindSpeed|tojson|safe }};
      var windGConfig = {
        "type":"gauge",
        "background-color":"transparent",
        "bgcolor": "transparent",
        "scale":{
          "size-factor":1
        },
        "scale-r":{ //Default Scale
          "aperture":200,
          "values":"0:5:1",
          "center":{
            "size": 5,
       	    "background-color":"#66CCFF #FFCCFF",
       	    "border-color":"none"
          }
        },
        "series":[
          {
            "values":speed,
            "text":"m/s"
          }
        ]
      };

      zingchart.render({
      	id : 'windGConfig',
      	data : windGConfig,
      	height : "300px",
      	width: "100%"
      });
      </script>
    </div>
  </div>
</div>
</section>
  <section="timeseries">
  <div class="col-md-12">
    <div style="padding: 5 30px">

    <input id="tab1" type="radio" name="tabs" checked>
    <label for="tab1">Temperature</label>

    <input id="tab2" type="radio" name="tabs">
    <label for="tab2">Precipitation</label>

    <input id="tab3" type="radio" name="tabs">
    <label for="tab3">Wind Speed</label>

    <section id="content1">
      <div id="tempGraph">
      </div>
      <script type=text/javascript>
      timeList = {{ sortedTimeSeries|tojson|safe }};
      temp = {{ timeseries|tojson|safe }};
      values=[];
      for (var i=0; i < timeList.length; i++) {
        values.push(temp.temperature[timeList[i]]);
      }
      console.log(temp.temperature);
      var myConfig = {
        "type": "area",
        "utc": true,
         "scaleX":{
           "minValue": '{{ startTime }}',
           "step": 3600000,
            "transform":{
             "type": 'date',
             "all": '%D, %d %M<br>%h:%i %A',
             "itemsOverlap": true
           },
           "item": {
             "fontSize": 10
           },
           "maxItems": 13,
           "guide": {
             "alpha": 1,
             "lineWidth": "2px"
           }
         },
         "scale-y":{
           "values":"20:35:2",
           "format":"%v \u00B0C",
           "guide":{
             "visible":false
           }
         },
        "plot":{
          "tooltip": {
              "visible": true
            }
        },
        "series": [
          {
          "values": values,
          "lineColor": '#03A9F4',
          "backgroundColor":"#03A9F4",
          "lineWidth":0.5,
          "marker": {
            "backgroundColor": '#03A9F4',
            "borderWidth": 0,
            "size": 2
          }
        }
      ]
      };

      zingchart.render({
      	id : 'tempGraph',
      	data : myConfig,
      	height: "200px",
      	width: "100%"
      });
      </script>

    </section>

    <section id="content2">
      <div id="precipitationChart"></div>
      <script>
      timeList = {{ sortedTimeSeries|tojson|safe }};
      temp = {{ timeseries|tojson|safe }};
      values=[];
      for (var i=0; i < timeList.length; i++) {
        values.push(temp.precipitation[timeList[i]]);
      }
      var myConfig = {
        "type":"heatmap",
        "plot":{
          "aspect":"vertical"
        },
        "plotarea":{
          "adjust-layout":"auto"
        },
        "utc": true,
         "scaleX":{
           "minValue": '{{ startTime }}',
           "step": 3600000,
            "transform":{
             "type": 'date',
             "all": '%D, %d %M<br>%h:%i %A',
             "itemsOverlap": true
           },
           "item": {
             "fontSize": 10
           },
           "maxItems": 13,
           "guide": {
             "alpha": 1,
             "lineWidth": "2px"
           }
         },
        "series":[
          {
            "values": values
            // "min-ratio":0,
            // "max-ratio":0.3
          }
        ]
      };

      zingchart.render({
        id : 'precipitationChart',
        data : myConfig,
        height : "100px",
        width: "100%"
      });
      </script>
    </section>

    <section id="content3">
      <div id="windChart"></div>
      <script>
      var windConfig = {
          "graphset":[
              {
                  "scale-x":{
                      "zooming":1
                  },
                  "arrows":[
                      {
                          "from":{
                              "hook":"node:plot=1,index=1"
                          },
                          "to":{
                              "hook":"node:plot=1,index=2"
                          }
                      },
                    {
                          "from":{
                              "hook":"node:plot=1,index=2"
                          },
                          "to":{
                              "hook":"node:plot=1,index=3"
                          }
                      },
                    {
                          "from":{
                              "hook":"node:plot=1,index=4"
                          },
                          "to":{
                              "hook":"node:plot=0,index=3"
                          }
                      }
                  ],
                  "scale":{
                      "size-factor":0.9
                  },
                  "type":"scatter",
                  "series":[
                    {
                          "values":[[0,270],
                          [1,270],
                          [2,270],
                          [3,270],
                          [4,270],
                          [5,270],
                          [6,270],
                          [7,270],
                          [8,270],
                          [9,270],
                          [10,270],
                          [11,270],
                          [12,270]]
                      },
                      {
                          "values":[[0,170],
                          [1,170],
                          [2,170],
                          [3,170],
                          [4,170],
                          [5,170],
                          [6,170],
                          [7,170],
                          [8,170],
                          [9,170],
                          [10,170],
                          [11,170],
                          [12,170]]
                      },
                      {
                          "values":[[0,68],
                          [1,68],
                          [2,68],
                          [3,68],
                          [4,68],
                          [5,68],
                          [6,68],
                          [7,68],
                          [8,68],
                          [9,68],
                          [10,68],
                          [11,68],
                          [12,68]]
                      }
                  ]
              }
          ]
      };

      zingchart.render({
      	id : 'windChart',
      	data : windConfig,
      	height : "300px",
      	width: "100%"
      });

      </script>
    </section>
</div>
</div>
</section>

{% endblock %}
